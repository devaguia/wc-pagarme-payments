{"mappings":"MAAO,MAAMA,EAETC,cACIC,KAAKC,YACT,CAEAA,aACI,MAAMC,EAAOC,SAASC,cAAc,aACpCF,GAAMG,UAAUC,IAAI,iBACpBJ,GAAMG,UAAUC,IAAI,yBAEpB,MAAMC,EAAMJ,SAASK,iBAAiB,MACtCD,GAAKE,SAASC,IACZA,EAAGL,UAAUC,IAAI,aAEvB,ECfG,MAAMK,EACXZ,cACEC,KAAKY,OACP,CAEAC,SACE,MAAMC,EAA2BX,SAASC,cAAc,QAElDW,EAAOZ,SAASa,cAAc,KACpCD,EAAKE,aAAa,KAAM,kBAExB,MAAMC,EAAUf,SAASa,cAAc,OACvCE,EAAQb,UAAUC,IAAI,kBACtBY,EAAQC,YAAYJ,GAEpB,MAAMK,EAAQjB,SAASa,cAAc,QACrCI,EAAMH,aAAa,KAAM,mBAEzB,MAAMI,EAAWlB,SAASa,cAAc,OACxCK,EAAShB,UAAUC,IAAI,mBACvBe,EAASF,YAAYC,GAErB,MAAME,EAAUnB,SAASa,cAAc,QACvCM,EAAQL,aAAa,KAAM,qBAE3B,MAAMM,EAAapB,SAASa,cAAc,OAC1CO,EAAWlB,UAAUC,IAAI,qBACzBiB,EAAWJ,YAAYG,GAEvB,MAAME,EAAQrB,SAASa,cAAc,OACrCQ,EAAMnB,UAAUC,IAAI,aACpBkB,EAAML,YAAYD,GAClBM,EAAML,YAAYE,GAClBG,EAAML,YAAYI,GAElB,MAAME,EAAStB,SAASa,cAAc,OACtCS,EAAOpB,UAAUC,IAAI,cACrBmB,EAAON,YAAYK,GAEnBV,GAAMK,YAAYM,EACpB,CAEAC,QAAQC,GACN,MAAMZ,EAA2BZ,SAASC,cAAc,mBAExD,GAAIW,EACF,OAAQY,GACN,IAAK,QACHZ,EAAKa,UAAY,2BACjB,MAEF,IAAK,UACHb,EAAKa,UAAY,2BACjB,MAEF,IAAK,UACHb,EAAKa,UAAY,sBACjB,MAEF,IAAK,UACHb,EAAKa,UAAY,mCACjB,MAEF,QACEb,EAAKa,UAAY,GAIzB,CAEAC,WAAWC,GACT,MAAMR,EACJnB,SAASC,cAAc,sBACrBkB,IACFA,EAAQS,UAAYD,EAExB,CAEAE,SAASF,GACP,MAAMV,EACJjB,SAASC,cAAc,oBACrBgB,IACFA,EAAMW,UAAYD,EAEtB,CAEAG,UAAUC,EAAcC,EAAiBC,GACvC,MAAMZ,EAA4BrB,SAASC,cAAc,cACnDiC,EAAclC,SAASa,cAAc,SAE3C,GAAIqB,EAAQ,CACVA,EAAOpB,aAAa,OAAQ,UAC5BoB,EAAOpB,aAAa,KAAMmB,GAC1BC,EAAOhC,UAAY8B,EACnBE,EAAOC,MAAQJ,EAEf,MAAMK,EAAyBpC,SAASa,cAAc,OACtDuB,EAAUlC,UAAUC,IAAI,oBACxBiC,EAAUpB,YAAYkB,GAEtBb,GAAOL,YAAYoB,EACrB,CACF,CAEAC,WAAWC,GACT,MAAMjB,EAAQrB,SAASC,cAAc,cAE/BmC,EAAyBpC,SAASa,cAAc,OACtDuB,EAAUlC,UAAUC,IAAI,oBAExBmC,EAAKhC,SAAS4B,IACZ,MAAMK,EAAevC,SAASa,cAAc,SAC5C2B,QAAQC,IAAIF,GACRA,IACFA,EAAQzB,aAAa,OAAQ,UAC7ByB,EAAQzB,aAAa,KAAMoB,EAAOD,IAClCM,EAAQrC,UAAYgC,EAAOF,QAC3BO,EAAQJ,MAAQD,EAAOH,KAEvBK,EAAUpB,YAAYuB,GACxB,IAGFlB,GAAOL,YAAYoB,EACrB,CAEA3B,QACkC,CAC9B,kBACA,mBACA,qBACA,aACA,eAGOH,SAAS2B,IAChB,MAAMM,EAA8BvC,SAASC,cAAcgC,GACvDM,GACFA,EAAQG,QAAM,GAGpB,EC3IK,MAAeC,EAClBC,kBACI,MAAMvB,EAAe,IAAIb,EACzBa,EAAMX,SACNW,EAAME,QAAQ,WACdF,EAAMQ,SAAS,YACfR,EAAMK,WAAW,gBACnB,CAEAmB,gBAAgB5B,EAAeE,GAC7B,MAAME,EAAe,IAAIb,EAEzBa,EAAMX,SACNW,EAAME,QAAQ,WACdF,EAAMQ,SAASZ,GACfI,EAAMK,WAAWP,GACjBE,EAAMgB,WAAW,CACf,CACEN,KAAM,YACNC,QAAS,6BACTC,GAAI,qBAGV,CAEAa,cAAc7B,EAAeE,GAC3B,MAAME,EAAe,IAAIb,EAEzBa,EAAMX,SACNW,EAAME,QAAQ,SACdF,EAAMQ,SAASZ,GACfI,EAAMK,WAAWP,GACjBE,EAAMgB,WAAW,CACf,CACEN,KAAM,WACNC,QAAS,4BACTC,GAAI,mBAGV,CAEAc,mBACkD/C,SAASK,iBAAiB,iCAClEC,SAAQ4B,IACdA,EAAOc,iBAAiB,SAAS,KAC/BC,OAAOC,SAASC,QAAM,GACxB,GAEJ,EChDC,MAAMC,UAAqBT,EAChC/C,YAAY+B,GACV0B,QACAxD,KAAKa,OAAOiB,EACd,CAEAjB,OAAOiB,GACL,MAAM2B,EAAYtD,SAASa,cAAc,OACzCyC,EAAUxC,aAAa,KAAM,8BAE7B,MAAMO,EAAQrB,SAASa,cAAc,OACrCQ,EAAMnB,UAAUC,IAAI,oBACpBkB,EAAMkC,UAAY5B,EAClB2B,GAAWtC,YAAYK,GAEvB,MAAMV,EAAOX,SAASC,cAAc,QACpCU,GAAMK,YAAYsC,GAElBzD,KAAK2D,SACL3D,KAAK4D,SACP,CAEAf,SACE,MAAMY,EAAYtD,SAASC,cAAc,+BACzCqD,GAAWZ,QACb,CAEAc,SACE,MAAME,EAA+B1D,SAASC,cAC5C,qCAEFuC,QAAQC,IAAIiB,GAEZA,GAAMV,iBAAiB,UAAWW,IAChCA,EAAEC,iBACF/D,KAAKgE,aAAaH,EAAA,GAEtB,CAEAG,aAAaH,GACX,MAAM/C,EAAO,IAAImD,SACjBnD,EAAKoD,OAAO,SAAU,6BACtBpD,EAAKoD,OAAO,eAAgBC,KAAKC,UAAUpE,KAAKqE,qBAEhDrE,KAAK+C,kBAELuB,MAAM,GAAGlB,OAAOC,SAASkB,iCAAkC,CACzDC,OAAQ,OACR1D,KAAMA,IAEP2D,MAAMC,GAAaA,EAASC,SAC5BF,MAAMhC,IAEL,GAAIA,EAAKX,QAAS,CAChB,MAAMA,EAAeW,EAAKX,QACpBR,EAAkBQ,GAASR,QAC3BF,EAAgBU,GAASV,MAET,MAAlBU,GAAS8C,KACX5E,KAAKgD,gBAAgB5B,EAAOE,GAE5BtB,KAAKiD,cAAc7B,EAAOE,GAE5BtB,KAAKkD,mBAEL,MAAMb,EAASlC,SAASC,cAAc,qBAElCiC,GACFA,EAAOc,iBAAiB,SAAS,KAC/BC,OAAOC,SAASC,QAAM,GAG5B,IAEJ,CAEAe,mBACE,MAAMQ,EAAyC1E,SAASK,iBAAiB,oBACnEsE,EAA8B,GAgBpC,OAdAD,GAAUpE,SAAQiC,IAChB,MAAMqC,EAAQrC,EAAQsC,aAAa,cACnC,IAAI1C,EAAiB2C,WAAWvC,EAAQJ,OAEjCA,IAAQA,EAAQ,GAEvB,MAAM4C,EAAQ,CACZH,MAAOA,EACPzC,MAAOA,GAGTwC,EAAaK,KAAKD,EAAA,IAGbJ,CACT,CAEAlB,UAC+CzD,SAASK,iBAAiB,oBAEhEC,SAAQ2E,IACbA,EAAMjC,iBAAiB,SAAS,KAC9B,MACMkC,EADMD,EAAM9C,MAAMgD,MAAM,IACRC,IAAG,GAElBC,MAAMH,IAAkB,MAATA,IAEhBD,EAAM9C,MADK,MAAT+C,EACYD,EAAM9C,MAAMmD,QAAQ,IAAK,KAEzBL,EAAM9C,MAAMmD,QAAQJ,EAAM,I,GAGhD,GAEJ,ECjHF,MAAMK,EACJ3F,cACOI,SAASC,cAAc,4CAE5B,IAAIN,EAEJE,KAAK2F,oBACP,CAEAA,oBACE,MAAMtD,EAAgClC,SAASC,cAC7C,sDAGEiC,IAAQA,EAAOC,MAAQ,aAE3BD,GAAQc,iBAAiB,SAAS,KAChCnD,KAAK4F,yBAAuB,GAEhC,CAEAA,0BACE,MAAMnD,EAAO,IAAIwB,SACjBxB,EAAKyB,OAAO,SAAU,4BAEtBI,MAAM,GAAGlB,OAAOC,SAASkB,iCAAkC,CACzDC,OAAQ,OACR1D,KAAM2B,IAELgC,MAAMC,GAAaA,EAASC,SAC5BF,MAAK,SAAUC,GACd,GAAIA,GAAU5C,QAAS,CACrB,MAAMgD,EAAe,IAAIvB,EAAamB,EAAS5C,SAEzC+D,EAAQ1F,SAASC,cAAc,uCACrCyF,GAAO1C,iBAAiB,SAAS,KAC/B2B,EAAajC,QAAM,GAEvB,CACF,GACJ,CAEAiD,2BACE,MAAMrD,EAAO,IAAIwB,SACjBxB,EAAKyB,OAAO,SAAU,6BAEtBI,MAAM,GAAGlB,OAAOC,SAASkB,iCAAkC,CACzDC,OAAQ,OACR1D,KAAM2B,IACLgC,MAAK,SAAUC,GAChB,OAAOA,CACT,GACF,EAGFvE,SAASgD,iBAAiB,oBAAoB,KAC5C,IAAIuC,CAAA,G","sources":["resources/scripts/admin/components/Payment/index.ts","resources/scripts/admin/components/Popup/index.ts","resources/scripts/admin/components/Ajax/index.ts","resources/scripts/admin/pages/credit/installments/index.ts","resources/scripts/admin/pages/credit/index.ts"],"sourcesContent":["export class Payment {\n  \n    constructor() {\n        this.setClasses();\n    }\n\n    setClasses() {\n        const wrap = document.querySelector(\"#mainform\");\n        wrap?.classList.add(\"wpp-container\");\n        wrap?.classList.add(\"wpp-container-payment\");\n    \n        const trs = document.querySelectorAll(\"tr\");\n        trs?.forEach((tr) => {\n          tr.classList.add(\"top-wpp\");\n        });\n    }\n}\n  ","export class Popup {\n  constructor() {\n    this.reset();\n  }\n\n  create() {\n    const body: HTMLElement | null = document.querySelector(\"body\");\n\n    const icon = document.createElement(\"i\");\n    icon.setAttribute(\"id\", \"wpp-popup-icon\");\n\n    const iconDiv = document.createElement(\"div\");\n    iconDiv.classList.add(\"wpp-popup-icon\");\n    iconDiv.appendChild(icon);\n\n    const title = document.createElement(\"span\");\n    title.setAttribute(\"id\", \"wpp-popup-title\");\n\n    const titleDiv = document.createElement(\"div\");\n    titleDiv.classList.add(\"wpp-popup-title\");\n    titleDiv.appendChild(title);\n\n    const message = document.createElement(\"span\");\n    message.setAttribute(\"id\", \"wpp-popup-message\");\n\n    const messageDiv = document.createElement(\"div\");\n    messageDiv.classList.add(\"wpp-popup-message\");\n    messageDiv.appendChild(message);\n\n    const popup = document.createElement(\"div\");\n    popup.classList.add(\"wpp-popup\");\n    popup.appendChild(iconDiv);\n    popup.appendChild(titleDiv);\n    popup.appendChild(messageDiv);\n\n    const darker = document.createElement(\"div\");\n    darker.classList.add(\"wpp-darker\");\n    darker.appendChild(popup);\n\n    body?.appendChild(darker);\n  }\n\n  setIcon(type: string) {\n    const icon: HTMLElement | null = document.querySelector(\"#wpp-popup-icon\");\n\n    if (icon) {\n      switch (type) {\n        case \"error\":\n          icon.className = \"fa-solid fa-circle-xmark\";\n          break;\n\n        case \"success\":\n          icon.className = \"fa-solid fa-circle-check\";\n          break;\n\n        case \"loading\":\n          icon.className = \"fa-solid fa-spinner\";\n          break;\n\n        case \"warning\":\n          icon.className = \"fa-solid fa-triangle-exclamation\";\n          break;\n\n        default:\n          icon.className = \"\";\n          break;\n      }\n    }\n  }\n\n  setMessage(content: string) {\n    const message: HTMLElement | null =\n      document.querySelector(\"#wpp-popup-message\");\n    if (message) {\n      message.innerText = content;\n    }\n  }\n\n  setTitle(content: string) {\n    const title: HTMLElement | null =\n      document.querySelector(\"#wpp-popup-title\");\n    if (title) {\n      title.innerText = content;\n    }\n  }\n\n  setButton(text: string, classes: string, id: string) {\n    const popup: HTMLElement | null = document.querySelector(\".wpp-popup\");\n    const button: any = document.createElement(\"input\");\n\n    if (button) {\n      button.setAttribute(\"type\", \"button\");\n      button.setAttribute(\"id\", id);\n      button.classList = classes;\n      button.value = text;\n\n      const divButton: HTMLElement = document.createElement(\"div\");\n      divButton.classList.add(\"wpp-popup-button\");\n      divButton.appendChild(button);\n\n      popup?.appendChild(divButton);\n    }\n  }\n\n  setButtons(data: Array<{id: string, classes: string, text: string}>) {\n    const popup = document.querySelector(\".wpp-popup\");\n\n    const divButton: HTMLElement = document.createElement(\"div\");\n    divButton.classList.add(\"wpp-popup-button\");\n\n    data.forEach((button) => {\n      const element: any = document.createElement(\"input\");\n      console.log(element);\n      if (element) {\n        element.setAttribute(\"type\", \"button\");\n        element.setAttribute(\"id\", button.id);\n        element.classList = button.classes;\n        element.value = button.text;\n  \n        divButton.appendChild(element);\n      }\n    });\n\n    popup?.appendChild(divButton);\n  }\n\n  reset() {\n    const elements: Array<string> = [\n      \"#wpp-popup-icon\",\n      \"#wpp-popup-title\",\n      \"#wpp-popup-message\",\n      \".wpp-popup\",\n      \".wpp-darker\",\n    ];\n\n    elements.forEach((id) => {\n      const element: HTMLElement | null = document.querySelector(id);\n      if (element) {\n        element.remove();\n      }\n    });\n  }\n}\n","import { Popup } from \"../Popup\";\n\nexport abstract class Ajax {\n    setWaitingPopup() {\n        const popup: Popup = new Popup();\n        popup.create();\n        popup.setIcon('loading');\n        popup.setTitle('Aguarde!');\n        popup.setMessage('Carregando...');\n      }\n    \n      setSuccessPopup(title: string, message: string) {\n        const popup: Popup = new Popup();\n    \n        popup.create();\n        popup.setIcon(\"success\");\n        popup.setTitle(title);\n        popup.setMessage(message);\n        popup.setButtons([\n          {\n            text: \"Confirmar\",\n            classes: \"btn btn-success btn-reload\",\n            id: \"wpp-success-form\",\n          },\n        ]);\n      }\n    \n      setErrorPopup(title: string, message: string) {\n        const popup: Popup = new Popup();\n    \n        popup.create();\n        popup.setIcon(\"error\");\n        popup.setTitle(title);\n        popup.setMessage(message);\n        popup.setButtons([\n          {\n            text: \"Cancelar\",\n            classes: \"btn btn-failed btn-reload\",\n            id: \"wpp-error-form\",\n          },\n        ]);\n      }\n    \n      setReloadFuncion() {\n        const buttons: NodeListOf<HTMLElement> | null = document.querySelectorAll(\".wpp-popup-button .btn-reload\");\n        buttons.forEach(button => {\n          button.addEventListener(\"click\", () => {\n            window.location.reload();\n          })\n        });\n      }\n}","import { Ajax } from \"../../../components/Ajax\";\n\nexport class Installments extends Ajax {\n  constructor(content: string) {\n    super();\n    this.create(content);\n  }\n\n  create(content: string) {\n    const container = document.createElement(\"div\");\n    container.setAttribute(\"id\", \"wpp-installments-container\");\n\n    const popup = document.createElement(\"div\");\n    popup.classList.add(\"wpp-installments\");\n    popup.innerHTML = content;\n    container?.appendChild(popup);\n\n    const body = document.querySelector(\"body\");\n    body?.appendChild(container);\n\n    this.submit();\n    this.setMask();\n  }\n\n  remove() {\n    const container = document.querySelector(\"#wpp-installments-container\");\n    container?.remove();\n  }\n\n  submit() {\n    const form: HTMLFormElement | null = document.querySelector(\n      \".wpp-installments-settings > form\"\n    );\n    console.log(form);\n\n    form?.addEventListener(\"submit\", (e) => {\n      e.preventDefault();\n      this.saveSettings(form);\n    });\n  }\n\n  saveSettings(form: HTMLFormElement) {\n    const body = new FormData();\n    body.append(\"action\", \"save_pagarme_installments\");\n    body.append(\"installments\", JSON.stringify(this.get_installments()));\n    \n    this.setWaitingPopup();\n    \n    fetch(`${window.location.origin}/wp-admin/admin-ajax.php`, {\n      method: \"POST\",\n      body: body,\n    })\n    .then((response) => response.json())\n    .then((data: any) => {\n\n      if (data.content) {\n        const content: any = data.content;\n        const message: string = content?.message;\n        const title: string = content?.title;\n\n        if (content?.code === 200) {\n          this.setSuccessPopup(title, message);\n        } else {\n          this.setErrorPopup(title, message);\n        }\n        this.setReloadFuncion();\n\n        const button = document.querySelector(\"#wpp-success-form\");\n\n        if (button) {\n          button.addEventListener(\"click\", () => {\n            window.location.reload();\n          })\n        }\n      }\n    });\n  }\n\n  get_installments() {\n    const elements: NodeListOf<HTMLInputElement> = document.querySelectorAll(\".wpp-installment\");\n    const installments: Array<Object> = [];\n\n    elements?.forEach(element => {\n      const index = element.getAttribute(\"data-index\");\n      let value : Number = parseFloat(element.value);\n\n      if ( ! value ) value = 0;\n\n      const item  = {\n        index: index, \n        value: value\n      }\n\n      installments.push(item);\n    });\n\n    return installments;\n  }\n\n  setMask() {\n    const inputs: NodeListOf<HTMLInputElement> = document.querySelectorAll(\".wpp-installment\");\n\n    inputs.forEach(input => {\n      input.addEventListener(\"keyup\", () => {\n        const arr = input.value.split(\"\");\n        const char: any = arr.at(-1);\n\n          if ( isNaN(char) && char !== '.') {\n            if (char === ',') {\n              input.value = input.value.replace(\",\", \".\");\n            } else {\n              input.value = input.value.replace(char, \"\");\n            }\n          } \n      });\n    });\n  }\n}\n","import { Payment } from \"../../components/Payment\";\nimport { Installments } from \"./installments\";\n\nclass Credit {\n  constructor() {\n    if (!document.querySelector(\"#woocommerce_wc-pagarme-credit_enabled\"))\n      return;\n    new Payment();\n\n    this.handleInstalments();\n  }\n\n  handleInstalments() {\n    const button: HTMLInputElement|null = document.querySelector(\n      \"#woocommerce_wc-pagarme-credit_installments_config\"\n    );\n\n    if (button) button.value = \"Configure\";\n\n    button?.addEventListener(\"click\", () => {\n      this.getInstallmentsSettings();\n    });\n  }\n\n  getInstallmentsSettings() {\n    const data = new FormData();\n    data.append(\"action\", \"get_installment_settings\");\n\n    fetch(`${window.location.origin}/wp-admin/admin-ajax.php`, {\n      method: \"POST\",\n      body: data,\n    })\n      .then((response) => response.json())\n      .then(function (response: any) {\n        if (response?.content) {\n          const installments = new Installments(response.content);\n\n          const close = document.querySelector(\".wpp-installments-settings > .close\");\n          close?.addEventListener(\"click\", () => {\n            installments.remove();\n          });\n        }\n      });\n  }\n\n  saveInstallmentsSettings() {\n    const data = new FormData();\n    data.append(\"action\", \"save_installment_settings\");\n\n    fetch(`${window.location.origin}/wp-admin/admin-ajax.php`, {\n      method: \"POST\",\n      body: data,\n    }).then(function (response) {\n      return response;\n    });\n  }\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  new Credit();\n});\n"],"names":["$9ce509083704784c$export$ad8b2382ee557dc0","constructor","this","setClasses","wrap","document","querySelector","classList","add","trs","querySelectorAll","forEach","tr","$58abf49bf6bd9e0e$export$129a32eedafa97c5","reset","create","body","icon","createElement","setAttribute","iconDiv","appendChild","title","titleDiv","message","messageDiv","popup","darker","setIcon","type","className","setMessage","content","innerText","setTitle","setButton","text","classes","id","button","value","divButton","setButtons","data","element","console","log","remove","$d2c46f6d93986ae3$export$7a330199b2e76989","setWaitingPopup","setSuccessPopup","setErrorPopup","setReloadFuncion","addEventListener","window","location","reload","$89859759448ca279$export$30aea06dcfd8aa28","super","container","innerHTML","submit","setMask","form","e","preventDefault","saveSettings","FormData","append","JSON","stringify","get_installments","fetch","origin","method","then","response","json","code","elements","installments","index","getAttribute","parseFloat","item","push","input","char","split","at","isNaN","replace","$7f7295ded8af2ed6$var$Credit","handleInstalments","getInstallmentsSettings","close","saveInstallmentsSettings"],"version":3,"file":"index.js.map"}